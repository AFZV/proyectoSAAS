<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <title>Catálogo de Productos</title>

  <style>
    * { box-sizing: border-box; }

    @page {
      size: A4;
      margin: 0;
    }

    body {
      font-family: Arial, sans-serif;
      margin: 0;
      color: #333;
    }

    .pagina {
      padding: 20px 24px;
      display: grid;
      grid-template-columns: repeat(3, 1fr);
      grid-template-rows: repeat(3, 1fr);
      gap: 14px 18px;
      height: 100vh;
      page-break-after: always;
    }

    .producto {
      border: 1px solid #ccc;
      border-radius: 8px;
      padding: 8px 10px;
      display: flex;
      flex-direction: column;
      background-color: #fafafa;
      overflow: hidden;
    }

    /* IMAGEN */
    .producto img {
      width: 100%;
      height: 140px;
      object-fit: contain;
      margin-bottom: 6px;
      flex-shrink: 0;
    }

    /* CONTENIDO */
    .contenido {
      flex: 1;
      display: flex;
      flex-direction: column;
      justify-content: flex-start; /* evita huecos grandes */
      text-align: center;
    }

    /* NOMBRE */
    .producto h3 {
      font-size: 11px;
      color: #007bff;
      margin: 2px 0 4px 0;
      line-height: 1.25;

      display: -webkit-box;
      -webkit-line-clamp: 3; /* más espacio para descripción */
      -webkit-box-orient: vertical;
      overflow: hidden;
    }

    /* BLOQUE META */
    .meta {
      margin-top: 6px;
      display: flex;
      flex-direction: column;
      gap: 3px;
    }

    .producto p {
      font-size: 11px;
      margin: 0;
      line-height: 1.25;
    }

    .precio {
      font-weight: bold;
      color: #2c7a00;
    }

    .stock {
      font-weight: 600;
    }
  </style>

</head>
<body>
  <% for (let i = 0; i < productos.length; i += 9) { %>
    <div class="pagina">
      <% productos.slice(i, i + 9).forEach((p) => { %>
        <div class="producto">
          <img src="<%= p.imagenUrl %>" alt="Imagen del producto" />

          <div class="contenido">
            <h3><%= p.nombre %></h3>

            <div class="meta">
              <p>
                <strong>Categoría:</strong>
                <%= p.categoria?.nombre ?? "N/A" %>
              </p>

              <p class="precio">
                <strong>Precio:</strong>
                $<%= (p.precioVenta ?? 0).toLocaleString("es-CO") %>
              </p>

              <p class="stock">
                <strong>Stock:</strong>
                <%= (p.stockDisponible ?? 0) %>
              </p>
            </div>
          </div>
        </div>
      <% }) %>
    </div>
  <% } %>
</body>
</html>
