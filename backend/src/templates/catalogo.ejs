<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <title>Catálogo de Productos</title>

  <style>
    * { box-sizing: border-box; }

    @page { size: A4; margin: 0; }

    body {
      font-family: Arial, sans-serif;
      margin: 0;
      color: #333;
    }

    .pagina {
      padding: 20px 24px;
      display: grid;
      grid-template-columns: repeat(3, 1fr);
      grid-template-rows: repeat(3, 1fr);
      gap: 14px 18px;
      height: 100vh;
      page-break-after: always;
    }

    .producto {
      border: 1px solid #ccc;
      border-radius: 8px;
      padding: 6px 8px;          /* ⬇️ menos padding */
      display: flex;
      flex-direction: column;
      background-color: #fafafa;
      overflow: hidden;
    }

    /* IMAGEN: más grande */
    .producto img {
      width: 100%;
      height: 175px;             /* ⬆️ sube de 140 a 175 */
      object-fit: contain;
      margin: 0 0 4px 0;         /* ⬇️ menos margen */
      flex-shrink: 0;
    }

    .contenido {
      flex: 1;
      display: flex;
      flex-direction: column;
      justify-content: flex-start;
      text-align: center;
    }

    /* NOMBRE: más compacto y menos líneas */
    .producto h3 {
      font-size: 10px;           /* ⬇️ de 11 a 10 */
      color: #007bff;
      margin: 1px 0 3px 0;       /* ⬇️ menos margen */
      line-height: 1.15;         /* ⬇️ más compacto */

      display: -webkit-box;
      -webkit-line-clamp: 2;     /* ⬇️ de 3 a 2 líneas */
      -webkit-box-orient: vertical;
      overflow: hidden;
    }

    /* META: más compacto (menos texto y menos aire) */
    .meta {
      margin-top: 3px;           /* ⬇️ */
      display: flex;
      flex-direction: column;
      gap: 2px;                  /* ⬇️ */
    }

    .producto p {
      font-size: 9.5px;          /* ⬇️ de 11 a 9.5 */
      margin: 0;
      line-height: 1.15;         /* ⬇️ */
    }

    /* opcional: etiquetas en gris para que “pesen” menos */
    .producto p strong {
      font-weight: 600;
      color: #555;
    }

    .precio {
      font-weight: 700;
      color: #2c7a00;
    }

    .stock {
      font-weight: 600;
    }
  </style>
</head>

<body>
  <% for (let i = 0; i < productos.length; i += 9) { %>
    <div class="pagina">
      <% productos.slice(i, i + 9).forEach((p) => { %>
        <div class="producto">
          <img src="<%= p.imagenUrl %>" alt="Imagen del producto" />

          <div class="contenido">
            <h3><%= p.nombre %></h3>

            <div class="meta">
              <p>
                <strong>Categoría:</strong>
                <%= p.categoria?.nombre ?? "N/A" %>
              </p>

              <p class="precio">
                <strong>Precio:</strong>
                $<%= (p.precioVenta ?? 0).toLocaleString("es-CO") %>
              </p>

              <p class="stock">
                <strong>Stock:</strong>
                <%= (p.stockDisponible ?? 0) %>
              </p>
            </div>
          </div>
        </div>
      <% }) %>
    </div>
  <% } %>
</body>
</html>
