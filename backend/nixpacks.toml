# Instala dependencias necesarias antes de la build
[phases.setup]
apt_pkgs = ["postgresql-client"] # ğŸ”‘ Esto instala pg_dump y pg_restore

# Fase de instalaciÃ³n de dependencias Node.js
[phases.install]
cmds = ["npm install --legacy-peer-deps"]

# Fase de build
[phases.build]
cmds = ["npm run build"]

# Fase de ejecuciÃ³n
[phases.start]
cmd = "npm run start:prod"

# ConfiguraciÃ³n de cachÃ© para despliegues mÃ¡s rÃ¡pidos
[caches]
paths = ["/root/.npm"]

# Variables opcionales (puedes sobrescribir en Coolify)
[variables]
NODE_ENV = "production"
PORT = "4000"
